<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Natural Capture - Clawd Dashboard</title>
    <link rel="stylesheet" href="/static/design-system.css">
</head>
<body>
    <div class="app">
        <header class="app-header">
            <div class="app-header-content">
                <nav class="main-nav">
                    <a href="/" class="nav-link" data-module="dashboard">ü¶û Dashboard</a>
                    <a href="/cis.html" class="nav-link" data-module="cis">CIS</a>
                    <a href="/sticker-business.html" class="nav-link" data-module="sticker">Stickers</a>
                    <a href="/ceramics-intelligence.html" class="nav-link" data-module="ceramics">Ceramics</a>
                    <a href="/natural-capture.html" class="nav-link active" data-module="capture">Capture</a>
                </nav>
                <h1 class="app-title">Natural Capture</h1>
                <p class="app-subtitle">Zero-friction capture ‚Ä¢ PARA routing ‚Ä¢ Auto-classify</p>
            </div>
        </header>

        <main class="app-body">
            <div class="app-content">
                <!-- Stats Bar -->
                <div class="stats-bar">
                    <div class="stat-card accent-capture">
                        <div class="stat-value" id="today-captures">0</div>
                        <div class="stat-label">Today's Captures</div>
                    </div>
                    <div class="stat-card accent-capture">
                        <div class="stat-value" id="week-captures">0</div>
                        <div class="stat-label">This Week</div>
                    </div>
                    <div class="stat-card accent-capture">
                        <div class="stat-value" id="total-captures">0</div>
                        <div class="stat-label">Total Captures</div>
                    </div>
                    <div class="stat-card accent-capture">
                        <div class="stat-value" id="para-routed">0</div>
                        <div class="stat-label">PARA Routed</div>
                    </div>
                </div>

                <!-- Status Panel -->
                <div class="card mb-lg">
                    <div class="card-header">
                        <div class="card-title">System Status</div>
                        <span class="badge badge-success">Active</span>
                    </div>
                    <div class="card-body">
                        <div class="flex items-center gap-md">
                            <span style="display:inline-flex;align-items:center;gap:0.5rem;background:rgba(126,200,160,0.15);color:var(--accent-capture);padding:0.5rem 1rem;border-radius:var(--radius-sm);font-weight:500;">
                                <span style="width:8px;height:8px;background:var(--accent-success);border-radius:50%;animation:pulse 2s infinite;"></span>
                                Capture System Active
                            </span>
                            <span class="text-secondary" style="font-size:0.85rem;">Listening for: idea:, todo:, note:, remind me...</span>
                        </div>
                    </div>
                </div>

                <!-- Trigger Phrases -->
                <div class="card mb-lg">
                    <div class="card-header">
                        <div class="card-title">‚ö° Trigger Phrases</div>
                    </div>
                    <div class="card-body">
                        <div class="grid-3">
                            <div style="background:var(--bg-tertiary);border:1px solid var(--border-default);border-radius:var(--radius-md);padding:1rem;">
                                <span style="display:inline-block;background:var(--accent-capture);color:var(--bg-primary);padding:0.25rem 0.5rem;border-radius:var(--radius-sm);font-weight:600;font-size:0.8rem;margin-bottom:0.5rem;">idea:</span>
                                <p style="font-size:0.85rem;color:var(--text-secondary);">Capture ideas, concepts, possibilities</p>
                            </div>
                            <div style="background:var(--bg-tertiary);border:1px solid var(--border-default);border-radius:var(--radius-md);padding:1rem;">
                                <span style="display:inline-block;background:var(--accent-sticker);color:var(--bg-primary);padding:0.25rem 0.5rem;border-radius:var(--radius-sm);font-weight:600;font-size:0.8rem;margin-bottom:0.5rem;">todo:</span>
                                <p style="font-size:0.85rem;color:var(--text-secondary);">Tasks, actions, things to do</p>
                            </div>
                            <div style="background:var(--bg-tertiary);border:1px solid var(--border-default);border-radius:var(--radius-md);padding:1rem;">
                                <span style="display:inline-block;background:var(--accent-system);color:var(--bg-primary);padding:0.25rem 0.5rem;border-radius:var(--radius-sm);font-weight:600;font-size:0.8rem;margin-bottom:0.5rem;">note:</span>
                                <p style="font-size:0.85rem;color:var(--text-secondary);">General notes, observations</p>
                            </div>
                            <div style="background:var(--bg-tertiary);border:1px solid var(--border-default);border-radius:var(--radius-md);padding:1rem;">
                                <span style="display:inline-block;background:var(--accent-ceramics);color:var(--bg-primary);padding:0.25rem 0.5rem;border-radius:var(--radius-sm);font-weight:600;font-size:0.8rem;margin-bottom:0.5rem;">remind me...</span>
                                <p style="font-size:0.85rem;color:var(--text-secondary);">Time-based reminders</p>
                            </div>
                            <div style="background:var(--bg-tertiary);border:1px solid var(--border-default);border-radius:var(--radius-md);padding:1rem;">
                                <span style="display:inline-block;background:var(--text-muted);color:var(--bg-primary);padding:0.25rem 0.5rem;border-radius:var(--radius-sm);font-weight:600;font-size:0.8rem;margin-bottom:0.5rem;">bookmark:</span>
                                <p style="font-size:0.85rem;color:var(--text-secondary);">Save for later reference</p>
                            </div>
                            <div style="background:var(--bg-tertiary);border:1px solid var(--border-default);border-radius:var(--radius-md);padding:1rem;">
                                <span style="display:inline-block;background:var(--text-muted);color:var(--bg-primary);padding:0.25rem 0.5rem;border-radius:var(--radius-sm);font-weight:600;font-size:0.8rem;margin-bottom:0.5rem;">question:</span>
                                <p style="font-size:0.85rem;color:var(--text-secondary);">Open questions to revisit</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Processing Queue -->
                <div class="card mb-lg">
                    <div class="card-header">
                        <div class="card-title">‚öôÔ∏è Processing Queue</div>
                    </div>
                    <div class="card-body">
                        <div class="grid-4">
                            <div style="background:var(--bg-tertiary);border-radius:var(--radius-md);padding:1rem;text-align:center;">
                                <div style="font-size:1.5rem;font-weight:600;font-family:var(--font-mono);" id="queued-count">0</div>
                                <div style="font-size:0.8rem;color:var(--text-muted);">Queued</div>
                            </div>
                            <div style="background:var(--bg-tertiary);border-radius:var(--radius-md);padding:1rem;text-align:center;">
                                <div style="font-size:1.5rem;font-weight:600;font-family:var(--font-mono);" id="processing-count">0</div>
                                <div style="font-size:0.8rem;color:var(--text-muted);">Processing</div>
                            </div>
                            <div style="background:var(--bg-tertiary);border-radius:var(--radius-md);padding:1rem;text-align:center;">
                                <div style="font-size:1.5rem;font-weight:600;font-family:var(--font-mono);" id="completed-count">0</div>
                                <div style="font-size:0.8rem;color:var(--text-muted);">Completed</div>
                            </div>
                            <div style="background:var(--bg-tertiary);border-radius:var(--radius-md);padding:1rem;text-align:center;">
                                <div style="font-size:1.5rem;font-weight:600;font-family:var(--font-mono);" id="failed-count">0</div>
                                <div style="font-size:0.8rem;color:var(--text-muted);">Failed</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Captures -->
                <div class="card mb-lg">
                    <div class="card-header">
                        <div class="card-title">üì• Recent Captures</div>
                    </div>
                    <div class="card-body" style="padding:0;">
                        <div id="capture-list">
                            <div style="display:flex;align-items:center;gap:1rem;padding:1rem;border-bottom:1px solid var(--border-default);">
                                <span class="badge badge-capture">NOTE</span>
                                <div style="flex:1;">
                                    <div>Natural Capture system deployed</div>
                                    <div style="font-size:0.8rem;color:var(--text-muted);">Routed to: system-log</div>
                                </div>
                                <span style="font-size:0.8rem;color:var(--text-muted);">Just now</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Test Capture -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üß™ Test Capture</div>
                    </div>
                    <div class="card-body">
                        <div style="display:flex;gap:0.5rem;margin-bottom:0.75rem;">
                            <input type="text" id="test-input" class="form-input" placeholder="Try: 'idea: build a sticker business' or 'todo: buy coffee'" onkeypress="if(event.key==='Enter')testCapture()">
                            <button class="btn btn-primary" onclick="testCapture()">CAPTURE</button>
                        </div>
                        <p style="color:var(--text-muted);font-size:0.8rem;">
                            Try: <code style="background:var(--bg-tertiary);padding:0.125rem 0.375rem;border-radius:var(--radius-sm);">idea:</code>
                            <code style="background:var(--bg-tertiary);padding:0.125rem 0.375rem;border-radius:var(--radius-sm);">todo:</code>
                            <code style="background:var(--bg-tertiary);padding:0.125rem 0.375rem;border-radius:var(--radius-sm);">note:</code>
                            <code style="background:var(--bg-tertiary);padding:0.125rem 0.375rem;border-radius:var(--radius-sm);">remind me...</code>
                        </p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <style>
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>

    <script>
        function testCapture() {
            const input = document.getElementById('test-input');
            const text = input.value.trim();
            if (!text) return;

            // Simple classification
            let type = 'note';
            let badgeClass = 'badge-capture';
            let route = 'inbox';
            
            const lower = text.toLowerCase();
            if (lower.startsWith('idea:')) {
                type = 'idea';
                badgeClass = 'badge-cis';
                route = 'projects';
            } else if (lower.startsWith('todo:')) {
                type = 'todo';
                badgeClass = 'badge-sticker';
                route = 'tasks';
            } else if (lower.startsWith('remind')) {
                type = 'reminder';
                badgeClass = 'badge-ceramics';
                route = 'calendar';
            }

            // Add to list
            const list = document.getElementById('capture-list');
            const item = document.createElement('div');
            item.style.cssText = 'display:flex;align-items:center;gap:1rem;padding:1rem;border-bottom:1px solid var(--border-default);animation:fadeIn 0.3s ease;';
            item.innerHTML = `
                <span class="badge ${badgeClass}">${type.toUpperCase()}</span>
                <div style="flex:1;">
                    <div>${escapeHtml(text)}</div>
                    <div style="font-size:0.8rem;color:var(--text-muted);">Routed to: ${route}</div>
                </div>
                <span style="font-size:0.8rem;color:var(--text-muted);">Just now</span>
            `;
            list.insertBefore(item, list.firstChild);

            input.value = '';
            
            // Update count
            const todayEl = document.getElementById('today-captures');
            todayEl.textContent = parseInt(todayEl.textContent) + 1;
        }

        function escapeHtml(str) {
            if (!str) return '';
            return str.replace(/&/g, '&amp;')
                      .replace(/</g, '&lt;')
                      .replace(/>/g, '&gt;')
                      .replace(/"/g, '&quot;')
                      .replace(/'/g, '&#039;');
        }
    </script>
</body>
</html>
