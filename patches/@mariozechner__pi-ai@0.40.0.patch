diff --git a/dist/providers/google-shared.js b/dist/providers/google-shared.js
index a130bad0df74a2d9f1baa9713c1c62902d77aaae..4864a4d906cf296fc3026766630ef25bcabd7ff1 100644
--- a/dist/providers/google-shared.js
+++ b/dist/providers/google-shared.js
@@ -103,20 +103,33 @@ export function convertMessages(model, context) {
                     }
                 }
                 else if (block.type === "toolCall") {
-                    const part = {
-                        functionCall: {
-                            id: block.id,
-                            name: block.name,
-                            args: block.arguments,
-                        },
-                    };
-                    if (model.provider === "google-vertex" && part?.functionCall?.id) {
-                        delete part.functionCall.id; // Vertex AI does not support 'id' in functionCall
+                    // Gemini 3 requires thoughtSignature on all function calls when thinking mode is enabled.
+                    // When switching from a provider that doesn't support signatures (e.g., Claude via Antigravity),
+                    // we convert unsigned function calls to text to avoid API validation errors.
+                    const isGemini3 = model.id.toLowerCase().includes("gemini-3");
+                    const hasSignature = !!block.thoughtSignature;
+                    if (isGemini3 && !hasSignature) {
+                        const argsStr = JSON.stringify(block.arguments, null, 2);
+                        parts.push({
+                            text: `[Tool Call: ${block.name}]\nArguments: ${argsStr}`,
+                        });
                     }
-                    if (block.thoughtSignature) {
-                        part.thoughtSignature = block.thoughtSignature;
+                    else {
+                        const part = {
+                            functionCall: {
+                                id: block.id,
+                                name: block.name,
+                                args: block.arguments,
+                            },
+                        };
+                        if (model.provider === "google-vertex" && part?.functionCall?.id) {
+                            delete part.functionCall.id; // Vertex AI does not support 'id' in functionCall
+                        }
+                        if (block.thoughtSignature) {
+                            part.thoughtSignature = block.thoughtSignature;
+                        }
+                        parts.push(part);
                     }
-                    parts.push(part);
                 }
             }
             if (parts.length === 0)
