# ğŸš€ Moltbot æ¶æ„åˆ†æé€ŸæŸ¥è¡¨

## ğŸ“‹ ä¸€é¡µçº¸é¡¹ç›®æ¦‚è§ˆ

### é¡¹ç›®å®šä½
**å®‰å…¨å¢å¼ºç‰ˆä¸ªäººAIåŠ©ç†å¹³å°**ï¼ŒåŸºäºclawdbotï¼Œä¸“æ³¨å¤šé€šé“é›†æˆ+å®‰å…¨éš”ç¦»

### æ ¸å¿ƒæ•°æ®

```yaml
ä»£ç åº“: 4,505æ–‡ä»¶ | 200+ TypeScriptæºæ–‡ä»¶
æµ‹è¯•: 70%è¦†ç›–ç‡ | Vitestæ¡†æ¶
è¯­è¨€: TypeScript (ESM) | Swift | Kotlin
å¹³å°: Node.js â‰¥22.12.0 | macOS | iOS | Android
```

---

## ğŸ—ï¸ ä¸‰å±‚æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           é€šé“å±‚ (Channel Layer)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ WhatsApp  Telegram  Discord  Slack  Signal   â”‚
â”‚ (Baileys) (grammY)  (discord.js) (Bolt)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ç½‘å…³å±‚ (Gateway Layer)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ WebSocket (127.0.0.1:18789)                  â”‚
â”‚ â”œâ”€ è·¯ç”±ç®¡ç† (Routing)                        â”‚
â”‚ â”œâ”€ ä¼šè¯éš”ç¦» (Session Isolation)              â”‚
â”‚ â”œâ”€ é…å¯¹ç³»ç»Ÿ (Pairing-based Access Control)  â”‚
â”‚ â””â”€ æƒé™æ§åˆ¶ (Permission Management)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ‰§è¡Œå±‚ (Execution Layer)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Agent Pool        Sandbox         Tools      â”‚
â”‚ (Claude/OpenAI)   (Docker)        (Bash/Node)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§ä¸‰å¤§æ”¯æŸ±

### 1ï¸âƒ£ DMé…å¯¹ä¿æŠ¤ (Pairing-based Access Control)

```
æœªçŸ¥ç”¨æˆ· â†’ ç”Ÿæˆé…å¯¹ç  (8å­—ç¬¦) â†’ ç®¡ç†å‘˜å®¡æ‰¹ â†’ åŠ å…¥ç™½åå• â†’ æ¶ˆæ¯å¤„ç†
              â†“
         60åˆ†é’ŸTTL + æœ€å¤š3ä¸ªå¾…å®¡æ‰¹
```

**å…³é”®æ–‡ä»¶**: `src/pairing/pairing-store.ts` (466è¡Œ)

### 2ï¸âƒ£ æ²™ç®±éš”ç¦» (Layered Sandbox)

| ä¼šè¯ç±»å‹ | æ²™ç®± | å·¥å…·è®¿é—® |
|---------|------|---------|
| å•èŠ (Main) | âŒ æ—  | å®Œå…¨è®¿é—® |
| ç¾¤èŠ (Non-main) | âœ… Docker | å—é™ç™½åå• |

**å…³é”®æ–‡ä»¶**: `src/agents/sandbox/docker.ts` (11KB)

### 3ï¸âƒ£ å®‰å…¨å®¡è®¡ (Automated Audit)

```bash
# CLIå‘½ä»¤
moltbot security audit         # å¿«é€Ÿå®¡è®¡
moltbot security audit --deep  # æ·±åº¦æ¢æµ‹
moltbot security audit --fix   # è‡ªåŠ¨ä¿®å¤
```

**å…³é”®æ–‡ä»¶**: `src/security/audit.ts` (36KB, 38æ£€æŸ¥é¡¹)

---

## ğŸ“ æ ¸å¿ƒç›®å½•ç»“æ„

```
moltbot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agents/          # AI Agenté€»è¾‘
â”‚   â”‚   â””â”€â”€ sandbox/     # æ²™ç®±ç³»ç»Ÿ
â”‚   â”œâ”€â”€ channels/        # æ¶ˆæ¯é€šé“é€‚é…å™¨
â”‚   â”‚   â””â”€â”€ plugins/     # é€šé“æ’ä»¶ï¼ˆå«pairingï¼‰
â”‚   â”œâ”€â”€ cli/             # CLIå‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ security-cli.ts
â”‚   â”‚   â””â”€â”€ pairing-cli.ts
â”‚   â”œâ”€â”€ config/          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ gateway/         # Gatewayæ ¸å¿ƒ
â”‚   â”œâ”€â”€ pairing/         # é…å¯¹ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ pairing-store.ts (æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ security/        # å®‰å…¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ audit.ts
â”‚   â”‚   â”œâ”€â”€ fix.ts
â”‚   â”‚   â””â”€â”€ audit-fs.ts
â”‚   â””â”€â”€ sessions/        # ä¼šè¯ç®¡ç†
â”œâ”€â”€ apps/                # åŸç”Ÿåº”ç”¨
â”‚   â”œâ”€â”€ macos/           # Electron + Swift
â”‚   â”œâ”€â”€ ios/             # Swift + UIKit
â”‚   â””â”€â”€ android/         # Kotlin
â”œâ”€â”€ docs/                # æ–‡æ¡£ç«™ç‚¹
â”œâ”€â”€ extensions/          # æ‰©å±•æ’ä»¶
â”œâ”€â”€ skills/              # Skillå®šä¹‰
â””â”€â”€ test/                # æµ‹è¯•æ–‡ä»¶
```

---

## âš™ï¸ å…³é”®é…ç½®æ–‡ä»¶

### 1. ä¸»é…ç½® `~/.clawdbot/config.json`

```json
{
  "gateway": {
    "mode": "local",
    "auth": {
      "mode": "none"  // âš ï¸ ç”Ÿäº§ç¯å¢ƒå»ºè®®è®¾ä¸º"password"
    }
  },
  "agents": {
    "defaults": {
      "sandbox": {
        "mode": "non-main",  // ä»…ç¾¤èŠå¯ç”¨æ²™ç®±
        "image": "moltbot/sandbox:latest"
      }
    }
  },
  "channels": {
    "whatsapp": {
      "dmPolicy": "pairing",  // é…å¯¹ä¿æŠ¤
      "groupPolicy": "invite-only"
    }
  }
}
```

### 2. ç¯å¢ƒå˜é‡ `.env`

```bash
# AI Provider
ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=sk-...

# WhatsApp (å¯é€‰)
TWILIO_ACCOUNT_SID=ACxxxx
TWILIO_AUTH_TOKEN=xxxxx
TWILIO_WHATSAPP_FROM=whatsapp:+17343367101
```

### 3. æ²™ç®±é…ç½® `Dockerfile.sandbox`

```dockerfile
FROM node:22-alpine
RUN adduser -D -u 1000 sandbox  # érootç”¨æˆ·
USER sandbox
WORKDIR /workspace
CMD ["/bin/sh"]
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### å¼€å‘å‘½ä»¤

```bash
pnpm install          # å®‰è£…ä¾èµ–
pnpm build            # TypeScriptç¼–è¯‘
pnpm dev              # å¼€å‘æ¨¡å¼
pnpm lint             # ä»£ç æ£€æŸ¥
pnpm test             # è¿è¡Œæµ‹è¯•
pnpm test:coverage    # æµ‹è¯•è¦†ç›–ç‡
```

### è¿ç»´å‘½ä»¤

```bash
# ç³»ç»Ÿç®¡ç†
moltbot onboard                    # å‘å¯¼å¼åˆå§‹åŒ–
moltbot doctor                     # ç³»ç»Ÿè¯Šæ–­
moltbot config set key value       # é…ç½®ä¿®æ”¹

# é€šé“ç®¡ç†
moltbot channels status --probe    # æ¢æµ‹é€šé“çŠ¶æ€
moltbot channels list              # åˆ—å‡ºæ‰€æœ‰é€šé“

# é…å¯¹ç®¡ç†
moltbot pairing list <channel>               # æŸ¥çœ‹å¾…å®¡æ‰¹
moltbot pairing approve <channel> <code>     # å®¡æ‰¹é…å¯¹
moltbot pairing allowlist <channel>          # æŸ¥çœ‹ç™½åå•

# å®‰å…¨å®¡è®¡
moltbot security audit --deep --fix    # æ·±åº¦å®¡è®¡+è‡ªåŠ¨ä¿®å¤
moltbot security audit --json          # JSONè¾“å‡º
```

### Gatewayç®¡ç†

```bash
# å¯åŠ¨Gateway
moltbot gateway run --bind loopback --port 18789

# åœæ­¢Gateway
pkill -9 -f moltbot-gateway

# éªŒè¯Gateway
ss -ltnp | grep 18789
```

---

## ğŸ¯ å®‰å…¨æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰æ£€æŸ¥

- [ ] è¿è¡Œ `moltbot security audit --deep`
- [ ] ç¡®è®¤DMç­–ç•¥ä¸æ˜¯ `open`
- [ ] ç¡®è®¤Gatewayä¸ç»‘å®šå…¬ç½‘IP
- [ ] çŠ¶æ€ç›®å½•æƒé™: `chmod 700 ~/.clawdbot`
- [ ] é…ç½®æ–‡ä»¶æƒé™: `chmod 600 ~/.clawdbot/config.json`
- [ ] Dockeré•œåƒ: ä½¿ç”¨érootç”¨æˆ·
- [ ] Node.jsç‰ˆæœ¬: â‰¥22.12.0 (å®‰å…¨è¡¥ä¸)

### è¿è¡Œæ—¶ç›‘æ§

- [ ] é…å¯¹è¯·æ±‚æ•°é‡ï¼ˆå¼‚å¸¸æ¿€å¢ï¼Ÿï¼‰
- [ ] ç™½åå•å¤§å°ï¼ˆæ˜¯å¦æš´å¢ï¼Ÿï¼‰
- [ ] Gatewayé”™è¯¯æ—¥å¿—
- [ ] æ²™ç®±å®¹å™¨èµ„æºå ç”¨
- [ ] å·¥å…·è°ƒç”¨é¢‘ç‡ï¼ˆå¼‚å¸¸è¡Œä¸ºï¼Ÿï¼‰

---

## ğŸ“Š æ€§èƒ½åŸºå‡†å‚è€ƒ

| æŒ‡æ ‡ | å‚è€ƒå€¼ | è¯´æ˜ |
|------|--------|------|
| **Gatewayå¯åŠ¨æ—¶é—´** | <5ç§’ | é¦–æ¬¡å¯åŠ¨éœ€åŠ è½½é€šé“ |
| **é…å¯¹ç ç”Ÿæˆ** | <50ms | åŒ…å«æ–‡ä»¶é”å¼€é”€ |
| **æ¶ˆæ¯è·¯ç”±å»¶è¿Ÿ** | <100ms | WebSocketå¾€è¿” |
| **æ²™ç®±å¯åŠ¨** | 2-5ç§’ | Dockerå®¹å™¨å†·å¯åŠ¨ |
| **å¹¶å‘ä¼šè¯æ•°** | ~100 | å•Gatewayå®ä¾‹ |
| **å†…å­˜å ç”¨** | 200-500MB | å–å†³äºæ´»è·ƒä¼šè¯æ•° |

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### 1. é…å¯¹ç æ— æ³•ç”Ÿæˆ

**ç—‡çŠ¶**: `moltbot pairing list` æŠ¥é”™

**æ’æŸ¥**:
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la ~/.clawdbot/credentials/

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h ~/.clawdbot

# æ£€æŸ¥æ–‡ä»¶é”
lsof ~/.clawdbot/credentials/*.json
```

### 2. æ²™ç®±æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**: ç¾¤èŠæ¶ˆæ¯æ— å“åº”

**æ’æŸ¥**:
```bash
# æ£€æŸ¥DockeræœåŠ¡
docker ps
docker images | grep moltbot/sandbox

# æŸ¥çœ‹æ—¥å¿—
docker logs <container_id>

# æµ‹è¯•æ²™ç®±é•œåƒ
docker run -it moltbot/sandbox:latest /bin/sh
```

### 3. Gatewayè¿æ¥å¤±è´¥

**ç—‡çŠ¶**: å®¢æˆ·ç«¯æ— æ³•è¿æ¥åˆ° `ws://127.0.0.1:18789`

**æ’æŸ¥**:
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
ss -ltnp | grep 18789
netstat -ano | findstr 18789  # Windows

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status  # Linux
Get-NetFirewallRule  # Windows

# æŸ¥çœ‹Gatewayæ—¥å¿—
tail -f /tmp/moltbot-gateway.log
```

---

## ğŸ“š å­¦ä¹ è·¯å¾„å»ºè®®

### å…¥é—¨ (Day 1-3)

1. é˜…è¯» `README.md`ï¼ˆ82KBï¼Œå®Œæ•´åŠŸèƒ½è¯´æ˜ï¼‰
2. è¿è¡Œ `moltbot onboard` åˆå§‹åŒ–
3. ä½“éªŒå•èŠåœºæ™¯ï¼ˆæ— æ²™ç®±ï¼‰
4. æŸ¥çœ‹ `SECURITY.md` å®‰å…¨æ”¿ç­–

### è¿›é˜¶ (Week 1-2)

1. é˜…è¯» `src/pairing/pairing-store.ts`ï¼ˆé…å¯¹æ ¸å¿ƒï¼‰
2. é…ç½®Dockeræ²™ç®±æµ‹è¯•ç¾¤èŠåœºæ™¯
3. è¿è¡Œ `moltbot security audit --deep`
4. ç¼–å†™è‡ªå®šä¹‰æ’ä»¶ï¼ˆPlugin SDKï¼‰

### é«˜çº§ (Month 1+)

1. é˜…è¯» `AGENTS.md`ï¼ˆ17KBå¼€å‘æŒ‡å—ï¼‰
2. ç ”ç©¶ `src/security/audit.ts`ï¼ˆå®¡è®¡å¼•æ“ï¼‰
3. æ‰©å±•æ–°æ¶ˆæ¯é€šé“
4. è´¡çŒ®åˆ°å¼€æºç¤¾åŒº

---

## ğŸ“ å…³é”®æŠ€æœ¯å†³ç­–

| å†³ç­–ç‚¹ | é€‰æ‹© | ç†ç”± |
|--------|------|------|
| **é…å¯¹vs IPç™½åå•** | é…å¯¹ç  | è·¨è®¾å¤‡/åŠ¨æ€IPå‹å¥½ |
| **æ²™ç®±vsæƒé™æ§åˆ¶** | Dockeræ²™ç®± | æ›´å¼ºéš”ç¦»ä¿è¯ |
| **JSON vs SQLite** | æ··åˆä½¿ç”¨ | é…å¯¹ç”¨JSONï¼ˆç®€å•ï¼‰ï¼Œä¼šè¯ç”¨SQLiteï¼ˆæ€§èƒ½ï¼‰ |
| **WebSocket vs HTTP** | WebSocket | å®æ—¶åŒå‘é€šä¿¡ |
| **Monorepo vs å¤šä»“åº“** | Monorepo | ç»Ÿä¸€ç‰ˆæœ¬ç®¡ç† |
| **TypeScript vs JavaScript** | TypeScript | ç±»å‹å®‰å…¨ |

---

## ğŸ”— å¿«é€Ÿé“¾æ¥

### å®˜æ–¹èµ„æº
- **GitHubä»“åº“**: https://github.com/calvin-Yi3Wood/moltbot
- **æ–‡æ¡£ç«™ç‚¹**: https://docs.molt.bot
- **Discordç¤¾åŒº**: https://discord.gg/clawd
- **å®‰å…¨æŒ‡å—**: https://docs.molt.bot/gateway/security

### æ ¸å¿ƒæ–‡ä»¶
- **é…å¯¹ç³»ç»Ÿ**: `src/pairing/pairing-store.ts:466`
- **å®‰å…¨å®¡è®¡**: `src/security/audit.ts:1-500`
- **æ²™ç®±ç®¡ç†**: `src/agents/sandbox/docker.ts:1-300`
- **å¼€å‘æŒ‡å—**: `AGENTS.md:1-164`

### å…³é”®å‘½ä»¤
```bash
moltbot onboard                      # ğŸš€ å¿«é€Ÿå¼€å§‹
moltbot security audit --fix         # ğŸ”’ å®‰å…¨æ‰«æ
moltbot pairing approve <ch> <code>  # âœ… å®¡æ‰¹ç”¨æˆ·
moltbot doctor                       # ğŸ©º ç³»ç»Ÿè¯Šæ–­
```

---

**é€ŸæŸ¥è¡¨ç‰ˆæœ¬**: v1.0
**ç”Ÿæˆæ—¶é—´**: 2026å¹´1æœˆ28æ—¥
**é€‚ç”¨é¡¹ç›®ç‰ˆæœ¬**: v2026.1.27-beta.1
**ç»´æŠ¤è€…**: æˆ˜ç•¥æ¶æ„å¸ˆ @ CMAFç³»ç»Ÿ
