## 2026-02-02

### Agent Architecture Established
- **AGENTS.md vs SOUL.md pattern clarified**: AGENTS.md = comprehensive knowledge base (everything they need to know), SOUL.md = persona/tone/boundaries only. This follows OpenClaw docs - both are loaded every session, but AGENTS.md is the "training manual" and SOUL.md is "who they are."
- Restructured all three CEO agents (Matt, Sally, Andy) with this pattern
- Removed non-standard `AGENT.md` files (not part of OpenClaw bootstrap)

### MeshGuard Twenty CRM Setup
- **Dashboard:** https://meshguard.mollified.app
- **API:** https://api.mollified.app/rest
- Created custom fields via GraphQL metadata API:
  - **Company:** Industry, Customer Stage, Contract Tier, Lead Source, Agent Count
  - **Person:** Role Type, Champion, Decision Maker
  - **Opportunity:** Use Case, Contract Term, Primary Framework, POC Status, Competition
- Created **Design Partner** custom object with fields
- Full spec: `/Users/steve/meshguard-matt/docs/crm-setup.md`
- Workflows need to be configured via Twenty UI (Settings → Workflows)
- Steve Agent account created (steve@withagency.ai) - credentials in 1Password

### Beancount Finance Infrastructure
- Set up plain-text accounting for all three startups
- **MeshGuard:** Full SaaS chart of accounts, Stripe import script, README
- **SaveState:** Developer tool accounts (Pro $9/mo, Team $29/mo tiers)
- **UndercoverAgent:** Pre-revenue accounts (waitlist stage)
- Location: `<agent>/finance/` directory for each
- AI agents can read/write ledger files directly - no API needed

### 1Password Access (TOOLS.md updated)
- Never use direct `op` CLI - hangs on biometrics
- Always use tmux `op-safe` session with password from `~/.openclaw/.env`
- Credentials saved:
  - "MeshGuard Twenty CRM API Key" (workspace API key)
  - "MeshGuard Twenty CRM - Steve Agent" (my login)

### TradingView Signal
- SELL BTCUSDT @ $77,093 logged at 21:12 EST (R:R 2.65, RSI 36.71)

### Build Issue
- TypeScript error in sync: `ExtensionContext` not assignable to `AgentToolUpdateCallback` - may need attention

## Local Fork Patches

### Multi-agent group mention yielding (Feb 2)
- **File**: `src/telegram/bot-message-context.ts`
- **What**: Open bots yield when another bot is @mentioned
- **Why**: Multiple CEO agents in same group - don't want all responding when one is mentioned
- **Commit**: d4a2154b0
- **Maintain**: May need to reapply after upstream merges if this file conflicts

### Nocturnal Council Architecture (Sub-Agents)

Decided on **shared role bots** architecture instead of per-startup clones:
- **10 bots total** (vs 24 if per-startup): Steve + 3 CEOs + 6 role bots
- Role bots: Builder, Scribe, Canvas, Scout, Analyst, Sentinel, PM
- Each role bot bound to multiple groups with context separation via bindings
- Per-startup SOUL.md files in `/Users/steve/nocturnal-council/agents/{role}-{startup}/`
- Role bots use Sonnet 4 (`anthropic/claude-sonnet-4-20250514`)

**Created so far:**
- Builder bot: `8238191291:AAHlKb9LjDbf_j_ObDFJgCm9Fr4OMAcerjk`
- Scribe bot: `8556470579:AAE0e00AAG_JX6A16XaNw_7_vLgPd1OJaog`

**Group IDs:**
- MeshGuard: `-1003866610941` (topic 3 for agents)
- SaveState: `-1003555893955`

### Email Isolation

Each CEO agent has isolated himalaya email config (can't access other agents' email):
- Matt: `/Users/steve/meshguard-matt/.config/himalaya/config.toml`
- Sally: `/Users/steve/savestate-sally/.config/himalaya/config.toml`
- Andy: `/Users/steve/undercover-andy/.config/himalaya/config.toml`
- Set via `HIMALAYA_CONFIG` env var in each agent's openclaw.json

### Chatwoot Deployment

Multi-tenant customer support at **support.mollified.app**:
- Super Admin: steve@withagency.ai / BendDontBreak!2026
- Single instance serving all 3 startups with separate accounts
- Credentials stored in 1Password

### Scribe Routing Diagnosis

Investigated why Scribe wasn't responding in MeshGuard group:
- **NOT** a forum topic peer ID issue
- Log shows: `{"chatId":-1003866610941,"reason":"no-mention"}` → working as designed
- Scribe requires @mention to respond (mention gating working correctly)
- Next: update binding config to disable `mentionOnly` for MeshGuard group

### Blocked Items
- **ClawhHub auth**: Token not persisting after `clawhub login` - Beancount skill publish blocked
- **Role bot creation**: David rate limited by Telegram - 5 more bots needed
